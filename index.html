<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>My Valentine</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#e6397f">

<style>
body{
  margin:0;
  background:radial-gradient(circle at top,#300035,#120015);
  height:100vh;
  overflow:hidden;
  font-family:Georgia, serif;
}

.book{
  position:absolute;
  inset:0;
  display:flex;
  justify-content:center;
  align-items:center;
}

.page{
  position:absolute;
  width:90%;
  max-width:900px;
  height:90%;
  background:#fff6fb;
  border-radius:22px;
  padding:70px;
  box-shadow:0 40px 100px rgba(0,0,0,.45);
  opacity:0;
  transform:scale(.95);
  transition:1s;
}

.page.active{
  opacity:1;
  transform:scale(1);
}

h1{
  color:#e6397f;
  font-size:42px;
}

p{
  font-size:21px;
  line-height:1.9;
  color:#3a0c2a;
}

.heart{
  position:absolute;
  bottom:30px;
  left:50%;
  transform:translateX(-50%);
  width:90px;
  height:90px;
  background:#e6397f;
  clip-path:polygon(
    50% 85%,0 35%,25% 5%,50% 25%,75% 5%,100% 35%
  );
  cursor:pointer;
  animation:pulse 2s infinite;
}

@keyframes pulse{
  50%{transform:translateX(-50%) scale(1.15)}
}

.flower{
  position:absolute;
  font-size:44px;
  opacity:.75;
  animation:drift linear infinite;
}

@keyframes drift{
  from{transform:translateY(120vh) rotate(0)}
  to{transform:translateY(-140vh) rotate(360deg)}
}

#proposalText{
  font-size:26px;
  margin-top:20px;
  color:#5a0b3c;
}
</style>
</head>

<body>

<div class="book">

<!-- PAGE 1 -->
<div class="page active">
<h1>Valentineâ€™s Day</h1>
<p>This is a quiet place where my love exists.</p>
<p>This Valentineâ€™s Day, I choose patience, warmth, and you.</p>
<div class="heart"></div>
</div>

<!-- PAGE 2 -->
<div class="page">
<h1>Your Smile</h1>
<p>Your smile becomes a source of happiness for everyone.</p>
<p>I love you so much that words often feel small.</p>
<div class="heart"></div>
</div>

<!-- PAGE 3 -->
<div class="page">
<h1>A Gentle Question</h1>
<p>This is not pressure.</p>
<p>If one day you choose it, I would love to walk life with you.</p>
<div class="heart"></div>
</div>

<!-- PAGE 4 - PROPOSAL -->
<div class="page">
<h1>Will You Marry Me?</h1>
<p id="proposalText"></p>
<div id="proposalHeart" class="heart" style="width:120px;height:120px;"></div>
</div>

</div>

<script>
// PAGE NAVIGATION
const pages=[...document.querySelectorAll(".page")];
let i=0;

document.querySelectorAll(".heart").forEach(h=>{
  h.onclick=()=>{
    pages[i].classList.remove("active");
    i=Math.min(i+1,pages.length-1);
    pages[i].classList.add("active");
  };
});

// FLOATING FLOWERS/HEARTS
["ðŸŒ¹","ðŸŒ¼","ðŸ’œ","â¤ï¸"].forEach(sym=>{
  for(let i=0;i<8;i++){
    const f=document.createElement("div");
    f.className="flower";
    f.textContent=sym;
    f.style.left=Math.random()*100+"%";
    f.style.animationDuration=20+Math.random()*20+"s";
    document.body.appendChild(f);
  }
});

// PROPOSAL PAGE ANIMATION
const proposalMsg = "I want to spend every life, every moment, with you. Will you marry me?";
const proposalTextEl = document.getElementById("proposalText");
let proposalIndex = 0;

function typeProposal() {
  if(proposalIndex < proposalMsg.length){
    proposalTextEl.textContent += proposalMsg[proposalIndex];
    proposalIndex++;
    setTimeout(typeProposal, 100); // speed of text
  }
}

const proposalHeart = document.getElementById("proposalHeart");
proposalHeart.onclick = () => {
  pages[i].classList.remove("active");
  i = Math.min(i+1, pages.length-1);
  pages[i].classList.add("active");
  alert("You made me the happiest person alive! â¤ï¸");
}

// Start text only when proposal page is active
pages[pages.length-1].addEventListener("transitionend", ()=>{
  if(pages[pages.length-1].classList.contains("active")){
    proposalTextEl.textContent = "";
    proposalIndex = 0;
    typeProposal();
  }
});

// EXTRA PROPOSAL HEARTS
["ðŸ’–","ðŸ’˜","ðŸ’"].forEach(sym=>{
  for(let j=0;j<10;j++){
    const f=document.createElement("div");
    f.className="flower";
    f.textContent=sym;
    f.style.left=Math.random()*100+"%";
    f.style.fontSize=(30+Math.random()*50)+"px";
    f.style.animationDuration=15+Math.random()*15+"s";
    document.body.appendChild(f);
  }
});

// REGISTER SERVICE WORKER
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("sw.js");
}
</script>

</body>
</html>
